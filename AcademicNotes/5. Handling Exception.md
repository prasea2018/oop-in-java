# **UNIT 5: Handling Errors and Exceptions in Java**

---

## **1. Introduction to Errors and Exceptions**

### **1.1 What is an Error?**

An **error** is a serious problem that occurs during program execution and is generally **beyond the control of the programmer**.

Examples:

* Out of memory
* Stack overflow
* Hardware failure

```java
// Example: StackOverflowError
void recursive() {
    recursive();
}
```

Errors belong to the `Error` class and are **not normally handled**.

---

### **1.2 What is an Exception?**

An **exception** is an **abnormal condition** that occurs during the execution of a program and **disrupts the normal flow** of instructions.

**Exam Definition:**

> An exception is an event that occurs during program execution which disturbs the normal flow of the program.

---

### **Difference Between Error and Exception**

| Error                  | Exception               |
| ---------------------- | ----------------------- |
| Serious problem        | Recoverable condition   |
| Not handled by program | Can be handled          |
| Caused by environment  | Caused by program logic |

---

### Practice Questions

1. What is the difference between an error and an exception?
2. Why are errors usually not handled?

---

## **2. Basic Exceptions in Java**

Java provides a large number of **built-in exceptions**.

---

### **2.1 Common Built-in Exceptions**

| Exception                        | Cause                 |
| -------------------------------- | --------------------- |
| `ArithmeticException`            | Divide by zero        |
| `NullPointerException`           | Accessing null object |
| `ArrayIndexOutOfBoundsException` | Invalid array index   |
| `NumberFormatException`          | Invalid number format |
| `ClassNotFoundException`         | Class not found       |

---

### **Example: ArithmeticException**

```java
public class TestException {
  public static void main(String[] args) {
    int a = 10;
    int b = 0;
    int c = a / b;   // Exception occurs
  }
}
```

---

### **Exception Hierarchy**

```
Object
 └── Throwable
     ├── Error
     └── Exception
```

**Important Exam Note:**
All exceptions are subclasses of `Throwable`.

---

### Practice Questions

1. Name any four built-in exceptions.
2. What is the root class of all exceptions?

---

## **3. Proper Use of Exceptions**

### **Why Use Exception Handling?**

* Prevent abnormal termination
* Separate error handling from normal code
* Improve program reliability
* Simplify debugging and maintenance

**Best Practices**

* Use exceptions only for exceptional conditions
* Catch specific exceptions
* Avoid empty catch blocks
* Use finally for cleanup

---

### **Case Study: Banking System**

In a banking application:

* Invalid account number → `InvalidAccountException`
* Insufficient balance → `InsufficientBalanceException`

This avoids system crash and improves user experience.

---

### Activity

* Identify places where exception handling is required in ATM software.

---

## **4. Catching Exceptions: `try` and `catch`**

---

### **4.1 `try` Block**

The `try` block contains **code that may cause an exception**.

```java
try {
    int result = 10 / 0;
}
```

---

### **4.2 `catch` Block**

The `catch` block handles the exception.

```java
catch (ArithmeticException e) {
    System.out.println("Division by zero not allowed");
}
```

---

### **Complete Example**

```java
public class TestException {
  public static void main(String[] args) {
    int a = 10;
    int b = 0;
    try {
      int c = a / b;   // Exception occurs
    } catch (ArithmeticException e) {
      System.out.println("Error: " + e);
    }
  }
}
```

Program continues execution after handling exception.

---

### **Multiple `catch` Blocks**

```java
try {
    int arr[] = new int[5];
    arr[0] = 10;
    arr[1] = 0;
    arr[2] = 30;
    arr[3] = 40;
    arr[4] = 50;
    int c = arr[0] / arr[1];
    arr[5] = 60;
} catch (ArithmeticException e) {
    System.out.println("Arithmetic Error");
} catch (ArrayIndexOutOfBoundsException e) {
    System.out.println("Array Index Error");
}
```

More specific exceptions should be caught **first**.

---

### Practice Questions

1. Why is `try` followed by `catch`?
2. Can one try block have multiple catch blocks?

---

## **5. Throwing Exceptions: `throw` and `throws`**

---

## **5.1 `throw` Keyword**

The `throw` keyword is used to **explicitly throw an exception**.

---

### **Example**

```java
if (age < 18) {
    throw new ArithmeticException("Not eligible to vote");
}
```

Used inside a method.

---

## **5.2 `throws` Keyword**

The `throws` keyword is used to **declare exceptions** that a method may pass to the calling method.

---

### **Example**

```java
void readFile() throws IOException {
    // code
}
```

Responsibility of handling exception is transferred to caller.

---

### **Difference Between `throw` and `throws`**

| throw                | throws                       |
| -------------------- | ---------------------------- |
| Throws one exception | Declares multiple exceptions |
| Used inside method   | Used in method signature     |
| Creates exception    | Passes exception             |

---

### Practice Questions

1. Difference between throw and throws?
2. Where is throws written?

---

## **6. Re-throwing an Exception**

### **Meaning**

An exception that is **caught and thrown again** is called **re-throwing**.

---

### **Example**

```java
try {
  int a = 10 / 0;
} catch (ArithmeticException e) {
    System.out.println("Handled partially");
    throw e;
}
```

Useful when multiple levels of handling are needed.

---

### Practice Question

* Why is re-throwing required?

---

## **7. User-Defined Exceptions**

### **Meaning**

A **user-defined exception** is an exception created by the programmer to handle **application-specific errors**.

---

### **Steps to Create User-Defined Exception**

1. Extend `Exception` class
2. Provide constructor
3. Use `throw` to raise it

---

### **Example**

```java
class InvalidAgeException extends Exception {
    InvalidAgeException(String msg) {
        super(msg);
    }
}

class Test {
    static void checkAge(int age) throws InvalidAgeException {
        if (age < 18)
            throw new InvalidAgeException("Age below 18");
    }
}
```

---

### Practice Questions

1. Why do we need user-defined exceptions?
2. Which class must be extended?

---

## **8. Cleaning Up Using `finally` Clause**

### **Meaning**

The `finally` block contains **important code that must be executed**, whether an exception occurs or not.

Common Uses:

* Closing files
* Releasing resources
* Database connection cleanup

---

### **Syntax**

```java
try {
    // risky code
} catch (Exception e) {
    // handling
} finally {
    // cleanup code
}
```

---

### **Example**

```java
try {
    int x = 10 / 2;
} catch (Exception e) {
    System.out.println(e);
} finally {
    System.out.println("Execution completed");
}
```

`finally` always executes except in abnormal JVM termination.

---

### Practice Questions

1. Is finally block always executed?
2. Why is finally important?

---

## **9. Summary (Exam-Focused)**

* Exceptions handle runtime errors
* Java uses structured exception handling
* `try` encloses risky code
* `catch` handles exception
* `throw` explicitly raises exception
* `throws` declares exception
* User-defined exceptions improve clarity
* `finally` ensures resource cleanup

---
